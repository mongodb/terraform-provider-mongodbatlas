// Code generated by terraform-provider-mongodbatlas using `make generate-resource`. DO NOT EDIT.

package alertconfigurationapi

import (
	"context"

	"github.com/hashicorp/terraform-plugin-framework/resource/schema"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/planmodifier"
	"github.com/hashicorp/terraform-plugin-framework/types"
	"github.com/mongodb/terraform-provider-mongodbatlas/internal/common/autogen/customtypes"
	"github.com/mongodb/terraform-provider-mongodbatlas/internal/common/customplanmodifier"
)

func ResourceSchema(ctx context.Context) schema.Schema {
	return schema.Schema{
		Attributes: map[string]schema.Attribute{
			"created": schema.StringAttribute{
				Computed:            true,
				MarkdownDescription: "Date and time when MongoDB Cloud created the alert configuration. This parameter expresses its value in the ISO 8601 timestamp format in UTC.",
			},
			"enabled": schema.BoolAttribute{
				Computed:            true,
				Optional:            true,
				MarkdownDescription: "Flag that indicates whether someone enabled this alert configuration for the specified project.",
			},
			"event_type_name": schema.StringAttribute{
				Optional:            true,
				MarkdownDescription: "Event type that triggers an alert.",
			},
			"group_id": schema.StringAttribute{
				Required:            true,
				MarkdownDescription: "Unique 24-hexadecimal digit string that identifies your project. Use the [/groups](#tag/Projects/operation/listProjects) endpoint to retrieve all projects to which the authenticated user has access.\n\n**NOTE**: Groups and projects are synonymous terms. Your group id is the same as your project id. For existing groups, your group/project id remains the same. The resource and corresponding endpoints use the term groups.",
				PlanModifiers:       []planmodifier.String{customplanmodifier.NonUpdatable()},
			},
			"id": schema.StringAttribute{
				Computed:            true,
				MarkdownDescription: "Unique 24-hexadecimal digit string that identifies this alert configuration.",
			},
			"links": schema.ListNestedAttribute{
				Computed:            true,
				MarkdownDescription: "List of one or more Uniform Resource Locators (URLs) that point to API sub-resources, related API resources, or both. RFC 5988 outlines these relationships.",
				CustomType:          customtypes.NewNestedListType[TFLinksModel](ctx),
				NestedObject: schema.NestedAttributeObject{
					Attributes: map[string]schema.Attribute{
						"href": schema.StringAttribute{
							Computed:            true,
							MarkdownDescription: "Uniform Resource Locator (URL) that points another API resource to which this response has some relationship. This URL often begins with `https://cloud.mongodb.com/api/atlas`.",
						},
						"rel": schema.StringAttribute{
							Computed:            true,
							MarkdownDescription: "Uniform Resource Locator (URL) that defines the semantic relationship between this resource and another API resource. This URL often begins with `https://cloud.mongodb.com/api/atlas`.",
						},
					},
				},
			},
			"matchers": schema.ListNestedAttribute{
				Optional:            true,
				MarkdownDescription: "List of rules that determine whether MongoDB Cloud checks an object for the alert configuration.",
				CustomType:          customtypes.NewNestedListType[TFMatchersModel](ctx),
				NestedObject: schema.NestedAttributeObject{
					Attributes: map[string]schema.Attribute{
						"field_name": schema.StringAttribute{
							Required:            true,
							MarkdownDescription: "Name of the parameter in the target object that MongoDB Cloud checks. The parameter must match all rules for MongoDB Cloud to check for alert configurations.",
						},
						"operator": schema.StringAttribute{
							Required:            true,
							MarkdownDescription: "Comparison operator to apply when checking the current metric value against **matcher[n].value**.",
						},
						"value": schema.StringAttribute{
							Required:            true,
							MarkdownDescription: "Value to match or exceed using the specified **matchers.operator**.",
						},
					},
				},
			},
			"metric_threshold": schema.SingleNestedAttribute{
				Optional:            true,
				MarkdownDescription: "Threshold for the metric that, when exceeded, triggers an alert. The metric threshold pertains to event types which reflects changes of measurements and metrics about the serverless database.",
				CustomType:          customtypes.NewObjectType[TFMetricThresholdModel](ctx),
				Attributes: map[string]schema.Attribute{
					"metric_name": schema.StringAttribute{
						Required:            true,
						MarkdownDescription: "Human-readable label that identifies the metric against which MongoDB Cloud checks the configured **metricThreshold.threshold**.",
					},
					"mode": schema.StringAttribute{
						Optional:            true,
						MarkdownDescription: "MongoDB Cloud computes the current metric value as an average.",
					},
					"operator": schema.StringAttribute{
						Optional:            true,
						MarkdownDescription: "Comparison operator to apply when checking the current metric value.",
					},
					"threshold": schema.Float64Attribute{
						Optional:            true,
						MarkdownDescription: "Value of metric that, when exceeded, triggers an alert.",
					},
					"units": schema.StringAttribute{
						Computed:            true,
						Optional:            true,
						MarkdownDescription: "Element used to express the quantity. This can be an element of time, storage capacity, and the like.",
					},
				},
			},
			"notifications": schema.ListNestedAttribute{
				Optional:            true,
				MarkdownDescription: "List that contains the targets that MongoDB Cloud sends notifications.",
				CustomType:          customtypes.NewNestedListType[TFNotificationsModel](ctx),
				NestedObject: schema.NestedAttributeObject{
					Attributes: map[string]schema.Attribute{
						"api_token": schema.StringAttribute{
							Optional:            true,
							MarkdownDescription: "Slack API token or Bot token that MongoDB Cloud needs to send alert notifications via Slack. The resource requires this parameter when `\"notifications.[n].typeName\" : \"SLACK\"`. If the token later becomes invalid, MongoDB Cloud sends an email to the project owners. If the token remains invalid, MongoDB Cloud removes the token. \n\n**NOTE**: After you create a notification which requires an API or integration key, the key appears partially redacted when you:\n\n* View or edit the alert through the Atlas UI.\n\n* Query the alert for the notification through the Atlas Administration API.",
							Sensitive:           true,
						},
						"channel_name": schema.StringAttribute{
							Optional:            true,
							MarkdownDescription: "Name of the Slack channel to which MongoDB Cloud sends alert notifications. The resource requires this parameter when `\"notifications.[n].typeName\" : \"SLACK\"`.",
						},
						"datadog_api_key": schema.StringAttribute{
							Optional:            true,
							MarkdownDescription: "Datadog API Key that MongoDB Cloud needs to send alert notifications to Datadog. You can find this API key in the Datadog dashboard. The resource requires this parameter when `\"notifications.[n].typeName\" : \"DATADOG\"`.\n\n**NOTE**: After you create a notification which requires an API or integration key, the key appears partially redacted when you:\n\n* View or edit the alert through the Atlas UI.\n\n* Query the alert for the notification through the Atlas Administration API.",
							Sensitive:           true,
						},
						"datadog_region": schema.StringAttribute{
							Computed:            true,
							Optional:            true,
							MarkdownDescription: "Datadog region that indicates which API Uniform Resource Locator (URL) to use. The resource requires this parameter when `\"notifications.[n].typeName\" : \"DATADOG\"`.",
						},
						"delay_min": schema.Int64Attribute{
							Computed:            true,
							Optional:            true,
							MarkdownDescription: "Number of minutes that MongoDB Cloud waits after detecting an alert condition before it sends out the first notification.",
						},
						"email_address": schema.StringAttribute{
							Optional:            true,
							MarkdownDescription: "Email address to which MongoDB Cloud sends alert notifications. The resource requires this parameter when `\"notifications.[n].typeName\" : \"EMAIL\"`. You don't need to set this value to send emails to individual or groups of MongoDB Cloud users including:\n\n- specific MongoDB Cloud users (`\"notifications.[n].typeName\" : \"USER\"`)\n- MongoDB Cloud users with specific project roles (`\"notifications.[n].typeName\" : \"GROUP\"`)\n- MongoDB Cloud users with specific organization roles (`\"notifications.[n].typeName\" : \"ORG\"`)\n- MongoDB Cloud teams (`\"notifications.[n].typeName\" : \"TEAM\"`)\n\nTo send emails to one MongoDB Cloud user or grouping of users, set the `notifications.[n].emailEnabled` parameter.",
						},
						"email_enabled": schema.BoolAttribute{
							Optional:            true,
							MarkdownDescription: "Flag that indicates whether MongoDB Cloud should send email notifications. The resource requires this parameter when one of the following values have been set:\n\n- `\"notifications.[n].typeName\" : \"ORG\"`\n- `\"notifications.[n].typeName\" : \"GROUP\"`\n- `\"notifications.[n].typeName\" : \"USER\"`",
						},
						"integration_id": schema.StringAttribute{
							Computed:            true,
							Optional:            true,
							MarkdownDescription: "The id of the associated integration, the credentials of which to use for requests.",
						},
						"interval_min": schema.Int64Attribute{
							Optional:            true,
							MarkdownDescription: "Number of minutes to wait between successive notifications. MongoDB Cloud sends notifications until someone acknowledges the unacknowledged alert.\n\nPagerDuty, VictorOps, and OpsGenie notifications don't return this element. Configure and manage the notification interval within each of those services.",
						},
						"microsoft_teams_webhook_url": schema.StringAttribute{
							Optional:            true,
							MarkdownDescription: "Microsoft Teams Webhook Uniform Resource Locator (URL) that MongoDB Cloud needs to send this notification via Microsoft Teams. The resource requires this parameter when `\"notifications.[n].typeName\" : \"MICROSOFT_TEAMS\"`. If the URL later becomes invalid, MongoDB Cloud sends an email to the project owners. If the key remains invalid, MongoDB Cloud removes it.\n\n**NOTE**: When you view or edit the alert for a Microsoft Teams notification, the URL appears partially redacted.",
							Sensitive:           true,
						},
						"mobile_number": schema.StringAttribute{
							Optional:            true,
							MarkdownDescription: "Mobile phone number to which MongoDB Cloud sends alert notifications. The resource requires this parameter when `\"notifications.[n].typeName\" : \"SMS\"`.",
						},
						"notification_token": schema.StringAttribute{
							Optional:            true,
							MarkdownDescription: "HipChat API token that MongoDB Cloud needs to send alert notifications to HipChat. The resource requires this parameter when `\"notifications.[n].typeName\" : \"HIP_CHAT\"`\". If the token later becomes invalid, MongoDB Cloud sends an email to the project owners. If the token remains invalid, MongoDB Cloud removes it.\n\n**NOTE**: After you create a notification which requires an API or integration key, the key appears partially redacted when you:\n\n* View or edit the alert through the Atlas UI.\n\n* Query the alert for the notification through the Atlas Administration API.",
							Sensitive:           true,
						},
						"notifier_id": schema.StringAttribute{
							Computed:            true,
							Optional:            true,
							MarkdownDescription: "The notifierId is a system-generated unique identifier assigned to each notification method. This is needed when updating third-party notifications without requiring explicit authentication credentials.",
						},
						"ops_genie_api_key": schema.StringAttribute{
							Optional:            true,
							MarkdownDescription: "API Key that MongoDB Cloud needs to send this notification via Opsgenie. The resource requires this parameter when `\"notifications.[n].typeName\" : \"OPS_GENIE\"`. If the key later becomes invalid, MongoDB Cloud sends an email to the project owners. If the key remains invalid, MongoDB Cloud removes it.\n\n**NOTE**: After you create a notification which requires an API or integration key, the key appears partially redacted when you:\n\n* View or edit the alert through the Atlas UI.\n\n* Query the alert for the notification through the Atlas Administration API.",
							Sensitive:           true,
						},
						"ops_genie_region": schema.StringAttribute{
							Computed:            true,
							Optional:            true,
							MarkdownDescription: "Opsgenie region that indicates which API Uniform Resource Locator (URL) to use.",
						},
						"region": schema.StringAttribute{
							Computed:            true,
							Optional:            true,
							MarkdownDescription: "PagerDuty region that indicates which API Uniform Resource Locator (URL) to use.",
						},
						"roles": schema.ListAttribute{
							Optional:            true,
							MarkdownDescription: "List that contains the one or more organization roles that receive the configured alert. This parameter is available when `\"notifications.[n].typeName\" : \"GROUP\"` or `\"notifications.[n].typeName\" : \"ORG\"`. If you include this parameter, MongoDB Cloud sends alerts only to users assigned the roles you specify in the array. If you omit this parameter, MongoDB Cloud sends alerts to users assigned any role.",
							CustomType:          customtypes.NewListType[types.String](ctx),
							ElementType:         types.StringType,
						},
						"room_name": schema.StringAttribute{
							Optional:            true,
							MarkdownDescription: "HipChat API room name to which MongoDB Cloud sends alert notifications. The resource requires this parameter when `\"notifications.[n].typeName\" : \"HIP_CHAT\"`\".",
						},
						"service_key": schema.StringAttribute{
							Optional:            true,
							MarkdownDescription: "PagerDuty service key that MongoDB Cloud needs to send notifications via PagerDuty. The resource requires this parameter when `\"notifications.[n].typeName\" : \"PAGER_DUTY\"`. If the key later becomes invalid, MongoDB Cloud sends an email to the project owners. If the key remains invalid, MongoDB Cloud removes it.\n\n**NOTE**: After you create a notification which requires an API or integration key, the key appears partially redacted when you:\n\n* View or edit the alert through the Atlas UI.\n\n* Query the alert for the notification through the Atlas Administration API.",
							Sensitive:           true,
						},
						"sms_enabled": schema.BoolAttribute{
							Optional:            true,
							MarkdownDescription: "Flag that indicates whether MongoDB Cloud should send text message notifications. The resource requires this parameter when one of the following values have been set:\n\n- `\"notifications.[n].typeName\" : \"ORG\"`\n- `\"notifications.[n].typeName\" : \"GROUP\"`\n- `\"notifications.[n].typeName\" : \"USER\"`",
						},
						"team_id": schema.StringAttribute{
							Optional:            true,
							MarkdownDescription: "Unique 24-hexadecimal digit string that identifies one MongoDB Cloud team. The resource requires this parameter when `\"notifications.[n].typeName\" : \"TEAM\"`.",
						},
						"team_name": schema.StringAttribute{
							Optional:            true,
							MarkdownDescription: "Name of the MongoDB Cloud team that receives this notification. The resource requires this parameter when `\"notifications.[n].typeName\" : \"TEAM\"`.",
						},
						"type_name": schema.StringAttribute{
							Optional:            true,
							MarkdownDescription: "Human-readable label that displays the alert notification type.",
						},
						"username": schema.StringAttribute{
							Optional:            true,
							MarkdownDescription: "MongoDB Cloud username of the person to whom MongoDB Cloud sends notifications. Specify only MongoDB Cloud users who belong to the project that owns the alert configuration. The resource requires this parameter when `\"notifications.[n].typeName\" : \"USER\"`.",
						},
						"victor_ops_api_key": schema.StringAttribute{
							Optional:            true,
							MarkdownDescription: "API key that MongoDB Cloud needs to send alert notifications to Splunk On-Call. The resource requires this parameter when `\"notifications.[n].typeName\" : \"VICTOR_OPS\"`. If the key later becomes invalid, MongoDB Cloud sends an email to the project owners. If the key remains invalid, MongoDB Cloud removes it.\n\n**NOTE**: After you create a notification which requires an API or integration key, the key appears partially redacted when you:\n\n* View or edit the alert through the Atlas UI.\n\n* Query the alert for the notification through the Atlas Administration API.",
							Sensitive:           true,
						},
						"victor_ops_routing_key": schema.StringAttribute{
							Optional:            true,
							MarkdownDescription: "Routing key that MongoDB Cloud needs to send alert notifications to Splunk On-Call. The resource requires this parameter when `\"notifications.[n].typeName\" : \"VICTOR_OPS\"`. If the key later becomes invalid, MongoDB Cloud sends an email to the project owners. If the key remains invalid, MongoDB Cloud removes it.",
						},
						"webhook_secret": schema.StringAttribute{
							Optional:            true,
							MarkdownDescription: "Authentication secret for a webhook-based alert.\n\nAtlas returns this value if you set `\"notifications.[n].typeName\" :\"WEBHOOK\"` and either:\n* You set `notification.[n].webhookSecret` to a non-empty string\n* You set a default webhookSecret either on the Integrations page, or with the [Integrations API](#tag/Third-Party-Service-Integrations/operation/createIntegration)\n\n**NOTE**: When you view or edit the alert for a webhook notification, the secret appears completely redacted.",
							Sensitive:           true,
						},
						"webhook_url": schema.StringAttribute{
							Optional:            true,
							MarkdownDescription: "Target URL for a webhook-based alert.\n\nAtlas returns this value if you set `\"notifications.[n].typeName\" :\"WEBHOOK\"` and either:\n* You set `notification.[n].webhookURL` to a non-empty string\n* You set a default webhookUrl either on the [Integrations](https://www.mongodb.com/docs/atlas/tutorial/third-party-service-integrations/#std-label-third-party-integrations) page, or with the [Integrations API](#tag/Third-Party-Service-Integrations/operation/createIntegration)\n\n**NOTE**: When you view or edit the alert for a Webhook URL notification, the URL appears partially redacted.",
							Sensitive:           true,
						},
					},
				},
			},
			"severity_override": schema.StringAttribute{
				Optional:            true,
				MarkdownDescription: "Severity of the event.",
			},
			"threshold": schema.SingleNestedAttribute{
				Optional:            true,
				MarkdownDescription: "Threshold for the metric that, when exceeded, triggers an alert. The metric threshold pertains to event types which reflects changes of measurements and metrics in stream processors.",
				CustomType:          customtypes.NewObjectType[TFThresholdModel](ctx),
				Attributes: map[string]schema.Attribute{
					"metric_name": schema.StringAttribute{
						Optional:            true,
						MarkdownDescription: "Human-readable label that identifies the metric against which MongoDB Cloud checks the configured **metricThreshold.threshold**.",
					},
					"mode": schema.StringAttribute{
						Optional:            true,
						MarkdownDescription: "MongoDB Cloud computes the current metric value as an average.",
					},
					"operator": schema.StringAttribute{
						Optional:            true,
						MarkdownDescription: "Comparison operator to apply when checking the current metric value.",
					},
					"threshold": schema.Float64Attribute{
						Optional:            true,
						MarkdownDescription: "Value of metric that, when exceeded, triggers an alert.",
					},
					"units": schema.StringAttribute{
						Computed:            true,
						Optional:            true,
						MarkdownDescription: "Element used to express the quantity. This can be an element of time, storage capacity, and the like.",
					},
				},
			},
			"updated": schema.StringAttribute{
				Computed:            true,
				MarkdownDescription: "Date and time when someone last updated this alert configuration. This parameter expresses its value in the ISO 8601 timestamp format in UTC.",
			},
		},
	}
}

type TFModel struct {
	Created          types.String                                      `tfsdk:"created" autogen:"omitjson"`
	Enabled          types.Bool                                        `tfsdk:"enabled"`
	EventTypeName    types.String                                      `tfsdk:"event_type_name"`
	GroupId          types.String                                      `tfsdk:"group_id" autogen:"omitjson"`
	Id               types.String                                      `tfsdk:"id" autogen:"omitjson"`
	Links            customtypes.NestedListValue[TFLinksModel]         `tfsdk:"links" autogen:"omitjson"`
	Matchers         customtypes.NestedListValue[TFMatchersModel]      `tfsdk:"matchers"`
	MetricThreshold  customtypes.ObjectValue[TFMetricThresholdModel]   `tfsdk:"metric_threshold"`
	Notifications    customtypes.NestedListValue[TFNotificationsModel] `tfsdk:"notifications"`
	SeverityOverride types.String                                      `tfsdk:"severity_override"`
	Threshold        customtypes.ObjectValue[TFThresholdModel]         `tfsdk:"threshold"`
	Updated          types.String                                      `tfsdk:"updated" autogen:"omitjson"`
}
type TFLinksModel struct {
	Href types.String `tfsdk:"href" autogen:"omitjson"`
	Rel  types.String `tfsdk:"rel" autogen:"omitjson"`
}
type TFMatchersModel struct {
	FieldName types.String `tfsdk:"field_name"`
	Operator  types.String `tfsdk:"operator"`
	Value     types.String `tfsdk:"value"`
}
type TFMetricThresholdModel struct {
	MetricName types.String  `tfsdk:"metric_name"`
	Mode       types.String  `tfsdk:"mode"`
	Operator   types.String  `tfsdk:"operator"`
	Threshold  types.Float64 `tfsdk:"threshold"`
	Units      types.String  `tfsdk:"units"`
}
type TFNotificationsModel struct {
	ApiToken                 types.String                        `tfsdk:"api_token" autogen:"sensitive"`
	ChannelName              types.String                        `tfsdk:"channel_name"`
	DatadogApiKey            types.String                        `tfsdk:"datadog_api_key" autogen:"sensitive"`
	DatadogRegion            types.String                        `tfsdk:"datadog_region"`
	DelayMin                 types.Int64                         `tfsdk:"delay_min"`
	EmailAddress             types.String                        `tfsdk:"email_address"`
	EmailEnabled             types.Bool                          `tfsdk:"email_enabled"`
	IntegrationId            types.String                        `tfsdk:"integration_id"`
	IntervalMin              types.Int64                         `tfsdk:"interval_min"`
	MicrosoftTeamsWebhookUrl types.String                        `tfsdk:"microsoft_teams_webhook_url" autogen:"sensitive"`
	MobileNumber             types.String                        `tfsdk:"mobile_number"`
	NotificationToken        types.String                        `tfsdk:"notification_token" autogen:"sensitive"`
	NotifierId               types.String                        `tfsdk:"notifier_id"`
	OpsGenieApiKey           types.String                        `tfsdk:"ops_genie_api_key" autogen:"sensitive"`
	OpsGenieRegion           types.String                        `tfsdk:"ops_genie_region"`
	Region                   types.String                        `tfsdk:"region"`
	Roles                    customtypes.ListValue[types.String] `tfsdk:"roles"`
	RoomName                 types.String                        `tfsdk:"room_name"`
	ServiceKey               types.String                        `tfsdk:"service_key" autogen:"sensitive"`
	SmsEnabled               types.Bool                          `tfsdk:"sms_enabled"`
	TeamId                   types.String                        `tfsdk:"team_id"`
	TeamName                 types.String                        `tfsdk:"team_name"`
	TypeName                 types.String                        `tfsdk:"type_name"`
	Username                 types.String                        `tfsdk:"username"`
	VictorOpsApiKey          types.String                        `tfsdk:"victor_ops_api_key" autogen:"sensitive"`
	VictorOpsRoutingKey      types.String                        `tfsdk:"victor_ops_routing_key"`
	WebhookSecret            types.String                        `tfsdk:"webhook_secret" autogen:"sensitive"`
	WebhookUrl               types.String                        `tfsdk:"webhook_url" autogen:"sensitive"`
}
type TFThresholdModel struct {
	MetricName types.String  `tfsdk:"metric_name"`
	Mode       types.String  `tfsdk:"mode"`
	Operator   types.String  `tfsdk:"operator"`
	Threshold  types.Float64 `tfsdk:"threshold"`
	Units      types.String  `tfsdk:"units"`
}
