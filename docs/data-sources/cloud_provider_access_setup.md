# Data Source: mongodbatlas_cloud_provider_access_setup

`mongodbatlas_cloud_provider_access_setup` allows you to get a single role for a provider access role setup. Supported providers: AWS, AZURE and GCP.

-> **NOTE:** Groups and projects are synonymous terms. You may find `groupId` in the official documentation.

## Example Usage with AWS
```terraform
resource "mongodbatlas_cloud_provider_access_setup" "test_role" {
   project_id = "64259ee860c43338194b0f8e"
   provider_name = "AWS"
}

data "mongodbatlas_cloud_provider_access_setup" "single_setup" {
   project_id = mongodbatlas_cloud_provider_access_setup.test_role.project_id
   provider_name = mongodbatlas_cloud_provider_access_setup.test_role.provider_name
   role_id = mongodbatlas_cloud_provider_access_setup.test_role.role_id
}
```

## Example Usage with AZURE
```terraform
resource "mongodbatlas_cloud_provider_access_setup" "test_role" {
   project_id = "64259ee860c43338194b0f8e"
   provider_name = "AZURE"
   azure_config {
      atlas_azure_app_id = "9f2deb0d-be22-4524-a403-df531868bac0"
      service_principal_id = "22f1d2a6-d0e9-482a-83a4-b8dd7dddc2c1"
      tenant_id = "91402384-d71e-22f5-22dd-759e272cdc1c"
   }
}

data "mongodbatlas_cloud_provider_access_setup" "single_setup" {
   project_id = mongodbatlas_cloud_provider_access_setup.test_role.project_id
   provider_name = mongodbatlas_cloud_provider_access_setup.test_role.provider_name
   role_id = mongodbatlas_cloud_provider_access_setup.test_role.role_id
}
```

## Example Usage with GCP

```terraform
resource "mongodbatlas_cloud_provider_access_setup" "test_role" {
   project_id    = "64259ee860c43338194b0f8e"
   provider_name = "GCP"
}

data "mongodbatlas_cloud_provider_access_setup" "single_setup" {
   project_id    = mongodbatlas_cloud_provider_access_setup.test_role.project_id
   provider_name = mongodbatlas_cloud_provider_access_setup.test_role.provider_name
   role_id       = mongodbatlas_cloud_provider_access_setup.test_role.role_id
}
```

## Argument Reference

* `project_id` - (Required) The unique ID for the project to get all Cloud Provider Access 
* `provider_name` - (Required) cloud provider name. Supported values: `AWS`, `AZURE`, and `GCP`.
* `role_id` - (Required) unique role id among all the roles provided by MongoDB Atlas. 

## Attributes Reference

In addition to all arguments above, the following attributes are exported:

* `id`              - Autogenerated Unique ID for this data source.
* `aws_config`           - aws related role information
    * `atlas_assumed_role_external_id` - Unique external ID Atlas uses when assuming the IAM role in your AWS account.
    * `atlas_aws_account_arn`          - ARN associated with the Atlas AWS account used to assume IAM roles in your AWS account.
* `azure_config` - azure related configurations 
   * `atlas_azure_app_id` - Azure Active Directory Application ID of Atlas.
   * `service_principal_id`- UUID string that identifies the Azure Service Principal.
   * `tenant_id`          - UUID String that identifies the Azure Active Directory Tenant ID.
 * `gcp_config` - gcp related configurations
   * `status` - The status of the GCP cloud provider access setup (e.g., `IN_PROGRESS`, `ACTIVE`, `FAILED`).
   * `service_account_for_atlas` - The GCP service account email that Atlas uses.
* `created_date`  - Date on which this role was created.
* `last_updated_date`                - Date and time when this Azure Service Principal was last updated. This parameter expresses its value in the ISO 8601 timestamp format in UTC.

See [MongoDB Atlas API](https://docs.atlas.mongodb.com/reference/api/cloud-provider-access-get-roles/) Documentation for more information.
