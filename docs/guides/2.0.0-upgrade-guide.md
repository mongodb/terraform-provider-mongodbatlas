---
layout: "mongodbatlas"
page_title: "Upgrade Guide 2.0.0"
sidebar_current: "docs-mongodbatlas-guides-200-upgrade-guide"
description: |-
MongoDB Atlas Provider 2.0.0: Upgrade and Information Guide
---

# MongoDB Atlas Provider 2.0.0: Upgrade and Information Guide

The Terraform MongoDB Atlas Provider version 2.0.0 introduces new features, breaking changes, and resource deprecations/removals.

Use this guide to understand what’s new, what requires migration, and how to update your configurations.

## New Resources, Data Sources, and Features

### New `delete_on_create_timeout` attribute 

Multiple resources now support a `delete_on_create_timeout` boolean attribute that controls cleanup behavior when resource creation times out. When set to `true` (default), the provider will delete the underlying resource if the create operation times out, helping to avoid orphaned resources. This attribute is available in the following resources:
  - `mongodbatlas_advanced_cluster`
  - `mongodbatlas_cloud_backup_snapshot` 
  - `mongodbatlas_cluster_outage_simulation`
  - `mongodbatlas_encryption_at_rest_private_endpoint`
  - `mongodbatlas_flex_cluster`
  - `mongodbatlas_network_peering`
  - `mongodbatlas_online_archive`
  - `mongodbatlas_privatelink_endpoint`
  - `mongodbatlas_privatelink_endpoint_service`
  - `mongodbatlas_push_based_log_export`
  - `mongodbatlas_search_deployment`
  - `mongodbatlas_stream_processor`

### New Cloud User Assignment Resources 

New user and team management resources that replace deprecated invitation-based workflow:
  - `mongodbatlas_cloud_user_org_assignment` resource and data source: Manages user membership in organizations with structured roles and support for both pending and active memberships.
  - `mongodbatlas_cloud_user_project_assignment` resource and data source: Manages user membership in projects with automatic invitation handling based on organization membership status.
  - `mongodbatlas_cloud_user_team_assignment` resource and data source: Manages user membership in teams with support for both username and user ID.
  - `mongodbatlas_team_project_assignment` resource and data source: Manages team assignments to projects.

## Breaking Changes

### `mongodbatlas_advanced_cluster`
Resource:
  - The following attributes have been removed: `id`, `disk_size_gb`, `replication_specs.#.num_shards`, `replication_specs.#.id`, `advanced_configuration.default_read_concern`, `advanced_configuration.fail_index_key_too_long`. 
  - Several block elements are now attributes requiring syntax changes in existing configurations such as `replication_specs`, `region_configs`, `advanced_configuration`, etc.
  - Only the new sharding configuration (one `replication_spec` for each shard) that allows scaling shards independently is supported.
  - For details, see [Migration Guide: Advanced Cluster (v1.x → v2.0.0)](migrate-to-advanced-cluster-2.0.md).

Data source:
  - The following attributes have been removed: `id`, `disk_size_gb`, `replication_specs.#.num_shards`, `replication_specs.#.id`, `advanced_configuration.default_read_concern`, `advanced_configuration.fail_index_key_too_long`, `use_replication_spec_per_shard`.
  - The data sources will now return only the new sharding configuration (one `replication_spec` for each shard) of the clusters that allows scaling shards independently.
  - For details, see [Migration Guide: Advanced Cluster (v1.x → v2.0.0)](migrate-to-advanced-cluster-2.0.md).
  
### `mongodbatlas_cloud_backup_schedule`
Resource:
  - `export` and `auto_export_enabled` are now optional only arguments. This facilitates tracking changes in their configurations. 
  - `copy_settings.#.replication_spec_id` attribute has been removed. Use `copy_settings.#.zone_id` instead. To learn more, see the [1.18.0 upgrade guide](../guides/1.18.0-upgrade-guide.md#transition-cloud-backup-schedules-for-clusters-to-use-zones).

Data source:
  - `copy_settings.#.replication_spec_id` and `use_zone_id_for_copy_settings` attributes have been removed. Remove any usage of `use_zone_id_for_copy_settings` & replace any references to `copy_settings.#.replication_spec_id` in your configurations with `copy_settings.#.zone_id`. To learn more, see the [1.18.0 upgrade guide](../guides/1.18.0-upgrade-guide.md#transition-cloud-backup-schedules-for-clusters-to-use-zones).


### `mongodbatlas_maintenance_window`
Resource:
  - `hour_of_day` is now required. This clarification prevents errors when creating new resources. 
    
### `mongodbatlas_custom_db_role`
Resource:
  - `actions` now is set as `TypeSet`. This prevents plan diffs when reordering the `actions` in the resource.  
    
### `mongodbatlas_global_cluster_config`
Resource:
  - `custom_zone_mapping` attribute has been removed. Use `custom_zone_mapping_zone_id` instead. To learn more, see the [Sharding Configuration guide](https://registry.terraform.io/providers/mongodb/mongodbatlas/latest/docs/guides/advanced-cluster-new-sharding-schema).
    
Data source:
  - `custom_zone_mapping` attribute has been removed. Use `custom_zone_mapping_zone_id` instead. To learn more, see the [Sharding Configuration guide](https://registry.terraform.io/providers/mongodb/mongodbatlas/latest/docs/guides/advanced-cluster-new-sharding-schema).



## Removed resources & data sources

  - `mongodbatlas_cloud_provider_snapshot`
  This deprecated resource & data source(s) have been removed. Please use `mongodbatlas_cloud_backup_snapshot` instead.

  - `mongodbatlas_cloud_provider_snapshot_backup_policy`
  This deprecated resource & data source(s) have been removed. Please use `mongodbatlas_cloud_backup_schedule` instead.
  
  - `mongodbatlas_cloud_provider_snapshot_restore_job`
  This deprecated resource & data source(s) have been removed. Please use `mongodbatlas_cloud_backup_snapshot_restore_job` instead.
  
  - `mongodbatlas_privatelink_endpoint_serverless`
  This deprecated resource & data source(s) have been removed. For more details, see [Migration Guide: Transition out of Serverless Instances and Shared-tier clusters](https://registry.terraform.io/providers/mongodb/mongodbatlas/latest/docs/guides/serverless-shared-migration-guide).
  
  - `mongodbatlas_privatelink_endpoint_service_serverless`
  This deprecated resource & data source(s) have been removed. For more details, see [Migration Guide: Transition out of Serverless Instances and Shared-tier clusters](https://registry.terraform.io/providers/mongodb/mongodbatlas/latest/docs/guides/serverless-shared-migration-guide).
  
  - `mongodbatlas_teams`
  This deprecated resource & data source(s) have been removed. Please use `mongodbatlas_team` instead.

## Deprecations

Version 2.0.0 introduces several deprecations as part of modernizing the provider's user and invitation management. These deprecated resources and attributes **will be removed in a future major version release**. Migration guides are available to help transition to the recommended replacements:

### Resources and Data sources

- **`mongodbatlas_cluster` resource and data sources**: Deprecated. Use `mongodbatlas_advanced_cluster` resource and data sources instead. See [the Cluster to Advanced Cluster Migration Guide](../guides/cluster-to-advanced-cluster-migration-guide).

- **`mongodbatlas_org_invitation` resource and data source**: Deprecated. Use `mongodbatlas_cloud_user_org_assignment` resource instead. See the [Org Invitation to Cloud User Org Assignment Migration Guide](../guides/org-invitation-to-cloud-user-org-assignment-migration-guide.md) for migration steps.

- **`mongodbatlas_project_invitation` resource and data source**: Deprecated. Use `mongodbatlas_cloud_user_project_assignment` resource instead. See the [Project Invitation to Cloud User Project Assignment Migration Guide](../guides/project-invitation-to-cloud-user-project-assignment-migration-guide.md) for migration steps.

- **`mongodbatlas_atlas_user` data source**: Deprecated. Use `mongodbatlas_cloud_user_org_assignment` data source instead. See the [Migration Guide: Migrate off deprecated `mongodbatlas_atlas_user` and `mongodbatlas_atlas_users`](../guides/atlas-user-migration-guide.md) for migration steps.

- **`mongodbatlas_atlas_users` data source**: Deprecated. Use the `users` attribute on `mongodbatlas_organization`, `mongodbatlas_project`, or `mongodbatlas_team` data sources respectively. See the [Migration Guide: Migrate off deprecated `mongodbatlas_atlas_user` and `mongodbatlas_atlas_users`](../guides/atlas-user-migration-guide.md) for migration steps.

### Attributes

- **`teams` attribute in `mongodbatlas_project` resource and data source**: Deprecated. Use `mongodbatlas_team_project_assignment` resource and data source to manage team membership to projects. See [Project Teams Attribute to Team Project Assignment Resource Migration Guide](../guides/team_project_assignment_migration_guide) for migration steps.

- **`email_address` attribute in `mongodbatlas_atlas_user` and `mongodbatlas_atlas_users` data sources**: Deprecated. See the [Migration Guide: Migrate off deprecated `mongodbatlas_atlas_user` and `mongodbatlas_atlas_users`](../guides/atlas-user-migration-guide.md) for migration steps.

- **`usernames` attribute in `mongodbatlas_team` resource and data source**: Deprecated. Use `mongodbatlas_cloud_user_team_assignment` resource to manage team membership per user and team. See the [Team Usernames Attribute to Cloud User Team Assignment Migration guide](../guides/cloud_user_team_assignment_migration_guide.md) for migration steps.

2.0.0 also includes general improvements, bug fixes, and several key documentation updates. See the [CHANGELOG](https://github.com/mongodb/terraform-provider-mongodbatlas/blob/master/CHANGELOG.md) for more specific information.


### Helpful Links

* [Report bugs](https://github.com/mongodb/terraform-provider-mongodbatlas/issues)

* [Request Features](https://feedback.mongodb.com/forums/924145-atlas?category_id=370723)

* [Contact Support](https://docs.atlas.mongodb.com/support/) covered by MongoDB Atlas support plans, Developer and above.
